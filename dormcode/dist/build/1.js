webpackJsonp([1],{239:function(n,l,t){"use strict";function e(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,6,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.gotoRoomPage(n.context.$implicit.UnitCode)&&e}return e},k.b,k.a)),f["ɵdid"](1,1097728,null,3,F.a,[P.a,U.a,f.ElementRef,f.Renderer,[2,w.a]],null,null),f["ɵqud"](335544320,1,{contentLabel:0}),f["ɵqud"](603979776,2,{_buttons:1}),f["ɵqud"](603979776,3,{_icons:1}),f["ɵdid"](5,16384,null,0,S.a,[],null,null),(n()(),f["ɵted"](6,2,["\n        ","\n      "]))],null,function(n,l){n(l,6,0,l.context.$implicit.UnitName)})}function u(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,4,"div",[["class","unit-wrap"]],null,null,null,null,null)),(n()(),f["ɵted"](-1,null,["\n      "])),(n()(),f["ɵand"](16777216,null,null,1,null,e)),f["ɵdid"](3,802816,null,0,M.NgForOf,[f.ViewContainerRef,f.TemplateRef,f.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),f["ɵted"](-1,null,["\n    "]))],function(n,l){n(l,3,0,l.component.itemsObj)},null)}function o(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,1,"span",[["class","fr colf0 fn12"]],null,null,null,null,null)),(n()(),f["ɵted"](-1,null,["未绑定二维码"]))],null,null)}function i(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,19,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(n,l,t){var e=!0;if("click"===l){e=!1!==n.component.bindCode(n.context.$implicit.RoomCode,n.context.$implicit.RoomName)&&e}return e},k.b,k.a)),f["ɵdid"](1,1097728,null,3,F.a,[P.a,U.a,f.ElementRef,f.Renderer,[2,w.a]],null,null),f["ɵqud"](335544320,4,{contentLabel:0}),f["ɵqud"](603979776,5,{_buttons:1}),f["ɵqud"](603979776,6,{_icons:1}),f["ɵdid"](5,16384,null,0,S.a,[],null,null),(n()(),f["ɵted"](-1,2,["\n          "])),(n()(),f["ɵeld"](7,0,null,2,7,"p",[],null,null,null,null,null)),(n()(),f["ɵted"](-1,null,["\n              "])),(n()(),f["ɵeld"](9,0,null,null,1,"span",[["class","index-cont"]],null,null,null,null,null)),(n()(),f["ɵted"](10,null,["",""])),(n()(),f["ɵted"](-1,null,["\n              "])),(n()(),f["ɵand"](16777216,null,null,1,null,o)),f["ɵdid"](13,16384,null,0,M.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),f["ɵted"](-1,null,["\n          "])),(n()(),f["ɵted"](-1,2,["\n          "])),(n()(),f["ɵeld"](16,0,null,4,2,"button",[["class","bind-btn"],["clear",""],["ion-button",""],["item-end",""]],null,null,null,q.b,q.a)),f["ɵdid"](17,1097728,[[5,4]],0,D.a,[[8,""],U.a,f.ElementRef,f.Renderer],{clear:[0,"clear"]},null),(n()(),f["ɵted"](-1,0,["绑定"])),(n()(),f["ɵted"](-1,2,["\n      "]))],function(n,l){n(l,13,0,"nobind"==l.context.$implicit.QrStatus);n(l,17,0,"")},function(n,l){n(l,10,0,l.context.$implicit.RoomName)})}function a(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,4,"div",[["class","room-wrap"]],null,null,null,null,null)),(n()(),f["ɵted"](-1,null,["\n      "])),(n()(),f["ɵand"](16777216,null,null,1,null,i)),f["ɵdid"](3,802816,null,0,M.NgForOf,[f.ViewContainerRef,f.TemplateRef,f.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),f["ɵted"](-1,null,["\n    "]))],function(n,l){n(l,3,0,l.component.itemsObj)},null)}function d(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,6,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(n,l,t){var e=!0;if("ionInfinite"===l){e=!1!==n.component.doInfinite(t)&&e}return e},null,null)),f["ɵdid"](1,1196032,null,0,V.a,[E.a,f.NgZone,f.ElementRef,L.a],null,{ionInfinite:"ionInfinite"}),(n()(),f["ɵted"](-1,null,["\n      "])),(n()(),f["ɵeld"](3,0,null,null,2,"ion-infinite-scroll-content",[["loadingSpinner","bubbles"],["loadingText","正在加载更多。。。"]],[[1,"state",0]],null,null,_.b,_.a)),f["ɵdid"](4,114688,null,0,j.a,[V.a,U.a],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null),(n()(),f["ɵted"](-1,null,["\n      "])),(n()(),f["ɵted"](-1,null,["\n    "]))],function(n,l){n(l,4,0,"bubbles","正在加载更多。。。")},function(n,l){n(l,3,0,f["ɵnov"](l,4).inf.state)})}function r(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,1,"div",[["style","text-align: center;color: #8e9093"]],null,null,null,null,null)),(n()(),f["ɵted"](-1,null,["我是有底线的！"]))],null,null)}function c(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(n()(),f["ɵted"](-1,null,["\n    "])),(n()(),f["ɵand"](16777216,null,null,1,null,d)),f["ɵdid"](3,16384,null,0,M.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),f["ɵted"](-1,null,["\n    "])),(n()(),f["ɵand"](16777216,null,null,1,null,r)),f["ɵdid"](6,16384,null,0,M.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),f["ɵted"](-1,null,["\n  "]))],function(n,l){var t=l.component;n(l,3,0,t.moreData);n(l,6,0,!t.moreData)},null)}function s(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,21,"ion-content",[["class","index-cont"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,B.b,B.a)),f["ɵdid"](1,4374528,null,0,E.a,[U.a,J.a,L.a,f.ElementRef,f.Renderer,$.a,Q.a,f.NgZone,[2,z.a],[2,Z.a]],null,null),(n()(),f["ɵted"](-1,1,["\n  "])),(n()(),f["ɵeld"](3,0,null,1,14,"ion-list",[],null,null,null,null,null)),f["ɵdid"](4,16384,null,0,A.a,[U.a,f.ElementRef,f.Renderer,J.a,W.m,L.a],null,null),(n()(),f["ɵted"](-1,null,["\n    "])),(n()(),f["ɵeld"](6,0,null,null,1,"p",[["class","center park-name fn16"]],null,null,null,null,null)),(n()(),f["ɵted"](7,null,["",""])),(n()(),f["ɵted"](-1,null,["\n    "])),(n()(),f["ɵeld"](9,0,null,null,1,"p",[["class","title-txt fn14"]],null,null,null,null,null)),(n()(),f["ɵted"](10,null,["",""])),(n()(),f["ɵted"](-1,null,["\n    "])),(n()(),f["ɵand"](16777216,null,null,1,null,u)),f["ɵdid"](13,16384,null,0,M.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),f["ɵted"](-1,null,["\n    "])),(n()(),f["ɵand"](16777216,null,null,1,null,a)),f["ɵdid"](16,16384,null,0,M.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),f["ɵted"](-1,null,["\n  "])),(n()(),f["ɵted"](-1,1,["\n\n  "])),(n()(),f["ɵand"](16777216,null,1,1,null,c)),f["ɵdid"](20,16384,null,0,M.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),f["ɵted"](-1,1,["\n\n\n\n\n"]))],function(n,l){var t=l.component;n(l,13,0,t.isUnit);n(l,16,0,!t.isUnit);n(l,20,0,!t.isUnit)},function(n,l){var t=l.component;n(l,0,0,f["ɵnov"](l,1).statusbarPadding,f["ɵnov"](l,1)._hasRefresher);n(l,7,0,t.parkName);n(l,10,0,t.titleTxt)})}Object.defineProperty(l,"__esModule",{value:!0});var f=t(0),p=(t(7),t(44),t(57)),m=t(195),g=t(56),h=function(){function n(n,l,t,e,u){this.navCtrl=n,this.navParams=l,this.helpUtil=t,this.http=e,this.alertCtrl=u,this.QRcode="",this.itemsObj=[],this.floorCode="",this.isUnit=!0,this.titleTxt="",this.parkName="",this.Page=1,this.moreData=!0,this.PageNo=20}return n.prototype.ionViewWillEnter=function(){antlinker.configTitle({type:"label",title:"二维码绑定",fail:function(){},success:function(){}}),antlinker.configTitleButton({type:"close",text:"关闭",fail:function(){},success:function(){},trigger:function(){}}),this.floorCode=this.navParams.get("code"),this.QRcode=JSON.parse(sessionStorage.getItem("QRcode"))},n.prototype.ionViewDidEnter=function(){this.queryTopTitle(),this.queryUnitOrRoom()},n.prototype.queryTopTitle=function(){var n=this;this.http.postJSON({Router:m.a.Url.gettoptitle,Method:"POST",Body:{type:"dormitory",code:this.floorCode}}).then(function(l){l.FeedbackCode?n.helpUtil.toastPop(l.FeedbackText):n.parkName=l.data.DistrictName+l.data.DormitoryName},function(n){return console.log(n)})},n.prototype.queryUnitOrRoom=function(){var n=this;this.http.postJSON({Router:m.a.Url.getunit,Method:"POST",Body:{dormitory:this.floorCode,pageindex:this.Page,pagesize:this.PageNo}}).then(function(l){l.FeedbackCode?n.helpUtil.toastPop(l.FeedbackText):("room"==l.data.type?(n.isUnit=!1,n.titleTxt="请选择宿舍"):(n.isUnit=!0,n.titleTxt="请选择单元"),n.itemsObj=l.data.items)},function(n){return console.log(n)})},n.prototype.doInfinite=function(n){var l=this;this.Page++,this.http.postJSON({Router:m.a.Url.getunit,Method:"POST",Body:{dormitory:this.floorCode,pageindex:this.Page,pagesize:this.PageNo}}).then(function(t){t.FeedbackCode||(null!=t.data&&t.data.items.length>0?(l.moreData=!0,l.itemsObj=l.itemsObj.concat(t.data.items)):l.moreData=!1,n.complete())})},n.prototype.gotoRoomPage=function(n){this.navCtrl.push("RoomListPage",{code:n})},n.prototype.bindCode=function(n,l){var t=this;this.alertCtrl.create({title:"",message:'<p>确定要将该二维码与 </p><p>"'+this.parkName+l+'宿舍"</p><p>绑定吗？</p>',buttons:[{text:"取消",handler:function(n){}},{text:"确定",handler:function(e){t.http.postJSON({Router:m.a.Url.bindqrcodetoroom,Method:"POST",Body:{qrcode:t.QRcode,roomcode:n,roomname:t.parkName+l}}).then(function(n){n.FeedbackCode?t.helpUtil.toastPopTop(n.FeedbackText):(t.helpUtil.toastPopTop("绑定成功"),setTimeout(function(){antlinker.closeView({success:function(){},fail:function(){}})},1200))},function(n){return console.log(n)})}}]}).present()},n}(),b=function(){return function(){}}(),R=t(123),v=t(124),C=t(125),N=t(126),T=t(127),y=t(128),I=t(129),x=t(130),O=t(131),k=t(132),F=t(16),P=t(14),U=t(1),w=t(40),S=t(61),M=t(10),q=t(25),D=t(17),V=t(45),E=t(21),L=t(9),_=t(196),j=t(60),B=t(194),J=t(3),$=t(8),Q=t(24),z=t(4),Z=t(19),A=t(46),W=t(5),G=t(11),H=t(58),K=f["ɵcrt"]({encapsulation:2,styles:[],data:{}}),X=f["ɵccf"]("page-unitlist",h,function(n){return f["ɵvid"](0,[(n()(),f["ɵeld"](0,0,null,null,1,"page-unitlist",[],null,null,null,s,K)),f["ɵdid"](1,49152,null,0,h,[Z.a,G.a,g.a,p.a,H.a],null,null)],null,null)},{},{},[]),Y=t(12),nn=t(59),ln=t(79),tn=t(80),en=t(78),un=t(35);t.d(l,"UnitListPageModuleNgFactory",function(){return on});var on=f["ɵcmf"](b,[],function(n){return f["ɵmod"]([f["ɵmpd"](512,f.ComponentFactoryResolver,f["ɵCodegenComponentFactoryResolver"],[[8,[R.a,v.a,C.a,N.a,T.a,y.a,I.a,x.a,O.a,X]],[3,f.ComponentFactoryResolver],f.NgModuleRef]),f["ɵmpd"](4608,M.NgLocalization,M.NgLocaleLocalization,[f.LOCALE_ID,[2,M["ɵa"]]]),f["ɵmpd"](4608,Y["ɵi"],Y["ɵi"],[]),f["ɵmpd"](4608,Y.FormBuilder,Y.FormBuilder,[]),f["ɵmpd"](4608,g.a,g.a,[nn.a,H.a,ln.a,tn.a]),f["ɵmpd"](512,M.CommonModule,M.CommonModule,[]),f["ɵmpd"](512,Y["ɵba"],Y["ɵba"],[]),f["ɵmpd"](512,Y.FormsModule,Y.FormsModule,[]),f["ɵmpd"](512,Y.ReactiveFormsModule,Y.ReactiveFormsModule,[]),f["ɵmpd"](512,en.a,en.a,[]),f["ɵmpd"](512,en.b,en.b,[]),f["ɵmpd"](512,b,b,[]),f["ɵmpd"](256,un.a,h,[])])})}});