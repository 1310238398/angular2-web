{"version":3,"sources":["../../src/pages/member/membermanage/membermanage.module.ts","../../src/pages/member/membermanage/membermanage.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport {MemberManagePage} from \"./membermanage\";\n\n\n@NgModule({\n  declarations: [\n    MemberManagePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MemberManagePage),\n  ],\n  exports: [\n    MemberManagePage\n  ]\n})\nexport class MemberManagePageModule { }\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/member/membermanage/membermanage.module.ts","import { Component, ChangeDetectorRef } from '@angular/core';\nimport { IonicPage, NavController, AlertController, NavParams } from \"ionic-angular\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport { ServelUrl } from \"../../../app/ServelUrl\";\nimport { HttpService } from \"../../../http/http.Service\";\nimport { HelpUtils } from \"../../../app/utils/HelpUtils\";\n\ndeclare var antlinker;\n\n@IonicPage()\n@Component({\n  selector: 'page-membermanage',\n  templateUrl: 'membermanage.html'\n})\nexport class MemberManagePage {\n  UnionCode;\n  UnionName;\n  ApplyMember = [];\n  ApplicationCode;\n  page = {\n    Page: 1,\n    PageSize: 2,\n  };\n\n  moreData: boolean = true;\n\n  ApplyInfo;\n  ApplyStatus;\n  shetuanmember;\n\n  constructor(private navCtrl: NavController, public navParams: NavParams, public alertCtrl: AlertController, private http: HttpService, private HelpUtils: HelpUtils, private DomS: DomSanitizer) {\n    this.UnionCode = this.navParams.get('UnionCode');\n    this.UnionName = this.navParams.get('UnionName');\n\n    console.log(this.UnionCode)\n\n  }\n\n  //初始化加载\n  ionViewDidEnter() {\n    console.log(11111111)\n    if (this.UnionCode) {\n      console.log(44);\n      this.getapplyinfo();\n\n    }\n  }\n\n\n  //初始化加载\n  ionViewWillEnter() {\n    antlinker.configTitle({\n      type: \"label\",\n      title: \"社团成员\",\n      fail: function () { },\n      success: function () { }\n    });\n    // 右上角按钮\n    antlinker.configTitleButton({\n      showClose: true,\n      type: \"label\",\n      text: \"\",\n      success: function () { },\n      fail: function () { },\n      trigger: function () { }\n    });\n  }\n\n  //拒绝申请\n  pass(a) {\n    this.shetuanmember = a.Member;\n    this.ApplicationCode = a.ApplicationCode;\n    this.ApplyStatus = 2;\n    this.passapplication();\n  }\n\n  //同意申请\n  agree(a) {\n    this.shetuanmember = a.Member;\n    this.ApplicationCode = a.ApplicationCode;\n    this.ApplyStatus = 3;\n    this.addshetuanmember();\n    this.updateshetuanapply();\n\n  }\n\n  //拒绝申请理由\n  passapplication() {\n    const prompt = this.alertCtrl.create({\n      // title: 'Login',\n      // message: this.message,\n      inputs: [\n        {\n          name: 'apply',\n          placeholder: '请输入拒绝原因',\n          // type: 'password'\n\n        },\n      ],\n      buttons: [\n        {\n          text: '取消',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: '确定',\n          handler: data => {\n            console.log(data.apply);\n            this.ApplyInfo = data.apply\n            this.updateshetuanapply();\n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n\n\n\n  //加载当前社团申请列表\n  getapplyinfo(reload = false) {\n    if (reload) {\n      this.page.Page = 1;\n    }\n    console.log(1);\n    this.http.postJSON({\n      Router: ServelUrl.Url.getapplyinfo,\n      Method: 'POST',\n      Body: {\n        PageNum: this.page.Page++,\n        PageSize: this.page.PageSize,\n        Code: this.UnionCode,\n      }\n    }).then(res => {\n      if (!res.FeedbackCode) {\n\n        this.ApplyMember = this.ApplyMember.concat(res.Data.Datas);\n        console.log(this.ApplyMember);\n        if (reload) {\n          this.ApplyMember = res.Data.Datas;\n        }\n\n      }\n    })\n\n  }\n\n  //跳转到成员申请详情页\n  gomemberdetail(m) {\n    if (m.status == 1) {\n      this.ApplicationCode = m.ApplicationCode;\n      this.navCtrl.push('ManageDetailPage', {\n        UnionCode: this.UnionCode,\n        UnionName: this.UnionName,\n        ApplicationCode: this.ApplicationCode,\n      });\n\n    }\n\n    if (m.status == 2 || m.status == 3) {\n      antlinker.openNewView({\n        uri: 'ant://contacts/userdetails/open?UID=' + m.Member,\n        fail: function () {\n        }\n      });\n    }\n\n\n  }\n\n\n\n  doInfinite(infiniteScroll) {\n    this.http.postJSON({\n      Router: ServelUrl.Url.getapplyinfo,\n      Method: 'POST',\n      Body: {\n        PageNum: this.page.Page++,\n        PageSize: this.page.PageSize,\n        Code: this.UnionCode,\n      }\n    }).then(res => {\n      if (res.Data.Datas.length && !res.FeedbackCode) {\n        this.moreData = true;\n        this.ApplyMember = this.ApplyMember.concat(res.Data.Datas);\n\n      } else {\n        this.moreData = false;\n      }\n      infiniteScroll.complete();\n\n    })\n  }\n\n\n  /*\n社团申请相关\n*/\n\n  //添加社团成员\n  addshetuanmember() {\n\n    this.http.postJSON({\n      Router: ServelUrl.Url.addshetuanmember,\n      Method: 'POST',\n      Body: {\n        Code: this.UnionCode,         // 申请code\n        Member: this.shetuanmember,           // status\n      }\n    }).then(res => {\n      if (!res.FeedbackCode) {\n        console.log('save member success');\n      } else {\n        console.log('save member fail');\n      }\n    },\n      err => console.log(err)\n    );\n\n  }\n\n  //更新社团申请\n  updateshetuanapply() {\n\n    this.http.postJSON({\n      Router: ServelUrl.Url.updateshetuanapply,\n      Method: 'POST',\n      Body: {\n        Code: this.ApplicationCode,         // 申请code\n        Info: this.ApplyInfo,               // 拒绝理由\n        Status: this.ApplyStatus,           // status\n        Member: this.shetuanmember,           // status\n        Uname: this.UnionName,         // 社团name\n\n      }\n    }).then(res => {\n      if (!res.FeedbackCode) {\n        const that = this;\n        setTimeout(function () {\n          that.getapplyinfo(true);\n        }, '1000');\n\n        console.log('update apply success');\n      } else {\n        console.log('update apply fail');\n      }\n    },\n      err => console.log(err)\n    );\n\n  }\n\n\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/member/membermanage/membermanage.ts"],"sourceRoot":""}