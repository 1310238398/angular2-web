webpackJsonp([2],{240:function(l,n,e){"use strict";function t(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,0,"img",[["id","wechatBox"],["item-start",""],["src","assets/images/zhaopian.png"],["style","width:75px;height:85px;border: 0.5px solid #E3E3E3"]],null,null,null,null,null))],null,null)}function s(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,0,"img",[["id","wechatBox"],["item-start",""],["style","width:75px;height:85px;border: 0.5px solid #E3E3E3"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){var e=n.component;l(n,0,0,e.DomS.bypassSecurityTrustUrl(e.ImgInfo.URL))})}function u(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,1,"span",[["class","sexb fn13"]],null,null,null,null,null)),(l()(),c["ɵeld"](1,0,null,null,0,"img",[["src","assets/images/nan@2x.png"]],null,null,null,null,null))],null,null)}function o(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,1,"span",[["class","sexr fn13"]],null,null,null,null,null)),(l()(),c["ɵeld"](1,0,null,null,0,"img",[["src","assets/images/nv@2x.png"]],null,null,null,null,null))],null,null)}function a(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,53,"ion-card",[["style","margin: 2px 0;width: 100%;box-shadow:0 2px 5px 0 #E3E3E3 !important;"]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.DateSection()&&t}return t},null,null)),c["ɵdid"](1,16384,null,0,D.a,[P.a,c.ElementRef,c.Renderer],null,null),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵeld"](3,0,null,null,43,"ion-item",[["class","item item-block"],["style","width: 90%;margin:10px auto;border-bottom: 1px solid #E3E3E3;padding: 0;"]],null,null,null,w.b,w.a)),c["ɵdid"](4,1097728,null,3,F.a,[T.a,P.a,c.ElementRef,c.Renderer,[2,x.a]],null,null),c["ɵqud"](335544320,1,{contentLabel:0}),c["ɵqud"](603979776,2,{_buttons:1}),c["ɵqud"](603979776,3,{_icons:1}),c["ɵdid"](8,16384,null,0,O.a,[],null,null),(l()(),c["ɵted"](-1,2,["\n            "])),(l()(),c["ɵand"](16777216,null,0,1,null,t)),c["ɵdid"](11,16384,null,0,M.NgIf,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),c["ɵted"](-1,2,["\n            "])),(l()(),c["ɵand"](16777216,null,0,1,null,s)),c["ɵdid"](14,16384,null,0,M.NgIf,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),c["ɵted"](-1,2,["\n            "])),(l()(),c["ɵeld"](16,0,null,2,28,"div",[["class","studentbody fn13"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵeld"](18,0,null,null,10,"span",[["class","basic"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["姓名：\n                    "])),(l()(),c["ɵeld"](20,0,null,null,1,"span",[["class","honor-content"]],null,null,null,null,null)),(l()(),c["ɵted"](21,null,["",""])),(l()(),c["ɵted"](-1,null,["\n                    "])),(l()(),c["ɵand"](16777216,null,null,1,null,u)),c["ɵdid"](24,16384,null,0,M.NgIf,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),c["ɵted"](-1,null,["\n                    "])),(l()(),c["ɵand"](16777216,null,null,1,null,o)),c["ɵdid"](27,16384,null,0,M.NgIf,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵeld"](30,0,null,null,3,"span",[["class","basic"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["学院："])),(l()(),c["ɵeld"](32,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](33,null,["",""])),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵeld"](35,0,null,null,3,"span",[["class","basic"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["专业："])),(l()(),c["ɵeld"](37,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](38,null,["",""])),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵeld"](40,0,null,null,3,"span",[["class","basic"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["班级："])),(l()(),c["ɵeld"](42,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](43,null,["",""])),(l()(),c["ɵted"](-1,null,["\n            "])),(l()(),c["ɵted"](-1,2,["\n            "])),(l()(),c["ɵted"](-1,2,["\n        "])),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵeld"](48,0,null,null,4,"div",[["class","fn14"],["style","width: 90%;margin:10px auto;font-family: PingFangSC;color: #4A4A4A;letter-spacing: 0.38px;"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n            学号："])),(l()(),c["ɵeld"](50,0,null,null,1,"span",[["style","color:red;"]],null,null,null,null,null)),(l()(),c["ɵted"](51,null,["",""])),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵted"](-1,null,["\n    "]))],function(l,n){var e=n.component;l(n,11,0,!e.ImgInfo.AttachmentCode);l(n,14,0,e.ImgInfo.AttachmentCode);l(n,24,0,"男"==e.student.CodeName);l(n,27,0,"女"==e.student.CodeName)},function(l,n){var e=n.component;l(n,21,0,e.student.name);l(n,33,0,e.student.AcademyName);l(n,38,0,e.student.majorname);l(n,43,0,e.student.classname);l(n,51,0,e.student.UserCode)})}function d(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,6,"div",[["class","none"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵeld"](2,0,null,null,0,"img",[["class","noneimg"],["src","assets/images/kong.png"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵeld"](4,0,null,null,1,"div",[["class","noneFont"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["暂无更多内容"])),(l()(),c["ɵted"](-1,null,["\n    "]))],null,null)}function i(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,33,"div",[["class","photoalert"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵeld"](2,0,null,null,0,"div",[["class","alertback"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵeld"](4,0,null,null,28,"div",[["class","alertwapper"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n            "])),(l()(),c["ɵeld"](6,0,null,null,25,"div",[["class","alert-content"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵeld"](8,0,null,null,11,"div",[["class","center fn14"],["style","color:green;"]],null,null,null,null,null)),(l()(),c["ɵeld"](9,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,['确定要将"'])),(l()(),c["ɵeld"](11,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](12,null,["",""])),(l()(),c["ɵeld"](13,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](14,null,["(",")“"])),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵeld"](16,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["移入"])),(l()(),c["ɵeld"](18,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),c["ɵted"](19,null,["","班吗?"])),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵeld"](21,0,null,null,9,"div",[["class","btn-wapper-line"]],null,null,null,null,null)),(l()(),c["ɵted"](-1,null,["\n                    "])),(l()(),c["ɵeld"](23,0,null,null,2,"button",[["class","btn-ghost"],["ion-button",""]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.cancel()&&t}return t},E.b,E.a)),c["ɵdid"](24,1097728,null,0,B.a,[[8,""],P.a,c.ElementRef,c.Renderer],null,null),(l()(),c["ɵted"](-1,0,["取消"])),(l()(),c["ɵted"](-1,null,["\n                    "])),(l()(),c["ɵeld"](27,0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.gosub()&&t}return t},E.b,E.a)),c["ɵdid"](28,1097728,null,0,B.a,[[8,""],P.a,c.ElementRef,c.Renderer],null,null),(l()(),c["ɵted"](-1,0,["确定"])),(l()(),c["ɵted"](-1,null,["\n                "])),(l()(),c["ɵted"](-1,null,["\n            "])),(l()(),c["ɵted"](-1,null,["\n        "])),(l()(),c["ɵted"](-1,null,["\n    "]))],null,function(l,n){var e=n.component;l(n,12,0,e.student.name);l(n,14,0,e.student.UserCode);l(n,19,0,e.ClassName)})}function r(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,12,"ion-content",[["class","index-cont"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,H.b,H.a)),c["ɵdid"](1,4374528,null,0,J.a,[P.a,A.a,_.a,c.ElementRef,c.Renderer,V.a,L.a,c.NgZone,[2,j.a],[2,q.a]],null,null),(l()(),c["ɵted"](-1,1,["\n\n    "])),(l()(),c["ɵted"](-1,1,["\n\n    "])),(l()(),c["ɵand"](16777216,null,1,1,null,a)),c["ɵdid"](5,16384,null,0,M.NgIf,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),c["ɵted"](-1,1,["\n    "])),(l()(),c["ɵand"](16777216,null,1,1,null,d)),c["ɵdid"](8,16384,null,0,M.NgIf,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),c["ɵted"](-1,1,["\n\n    "])),(l()(),c["ɵand"](16777216,null,1,1,null,i)),c["ɵdid"](11,16384,null,0,M.NgIf,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),c["ɵted"](-1,1,["\n\n\n"]))],function(l,n){var e=n.component;l(n,5,0,e.student.name);l(n,8,0,!e.student.name);l(n,11,0,e.substatus)},function(l,n){l(n,0,0,c["ɵnov"](n,1).statusbarPadding,c["ɵnov"](n,1)._hasRefresher)})}Object.defineProperty(n,"__esModule",{value:!0});var c=e(0),p=(e(7),e(74),e(24)),h=e(122),m=e(123),f=e(198),g=function(){function l(l,n,e,t,s,u){this.navCtrl=l,this.alertCtrl=n,this.HelpUtils=e,this.navParams=t,this.http=s,this.DomS=u,this.substatus=!1,this.tiaobanstatus=!1,this.recordone={status:""},this.student={IntelUserCode:"",class:"",classname:"",name:"",AcademyName:"",majorname:"",UserCode:"",Counselor:""},this.class=[],this.classpeople={classnum:""},this.temTitle="调班申请",this.operator={name:"",IntelUserCode:""},this.TaskTime=this.nowDay(),this.ImgInfo={AttachmentUrl:""},this.UserCode=this.navParams.get("UserCode"),this.UserName=this.navParams.get("UserName"),this.RoleStatus=this.navParams.get("RoleStatus"),this.IntelCode=this.navParams.get("IntelCode"),console.log(this.UserCode),console.log("nihao",this.IntelCode)}return l.prototype.ionViewWillEnter=function(){antlinker.configTitle({type:"label",title:"学生调班",fail:function(){},success:function(){}})},l.prototype.ionViewDidEnter=function(){this.loadGetIntelUser(),this.getstudentinfo(),this.RoleStatus?this.getteacherclass():this.getclass()},l.prototype.getstudentinfo=function(){var l=this;console.log(778),console.log("aa",this.UserCode),this.http.postJSON({Router:f.a.Url.studentinfo,Method:"POST",Body:{Code:this.UserCode,Name:this.UserName}}).then(function(n){!n.FeedbackCode&&n.Data.Data?(console.log(n),l.student=n.Data.Data,l.ImgInfo=n.Data.Info,console.log(l.ImgInfo)):(l.HelpUtils.toastPop("查无此人"),console.log(n))})},l.prototype.getteacherclass=function(){var l=this;console.log("getclassbyteacher"),this.http.postJSON({Router:f.a.Url.getclassbyteacher,Method:"POST",Body:{UID:""}}).then(function(n){!n.FeedbackCode&&n.Data?(l.class=n.Data,console.log(n.Data)):console.log(n)})},l.prototype.getclass=function(){var l=this;console.log("getclassbystu"),this.http.postJSON({Router:f.a.Url.getclass,Method:"POST",Body:{}}).then(function(n){!n.FeedbackCode&&n.Data?(l.class=n.Data,console.log(n.Data)):console.log(n)})},l.prototype.DateSection=function(){var l=this,n=this.alertCtrl.create({title:"请选择班级",enableBackdropDismiss:!1,cssClass:"chooseclass",buttons:[{text:"取消"},{text:"确定",handler:function(n){if(console.log(n),!n)return l.HelpUtils.toastPop("请选择班级！"),!1;console.log("mmmm",n),l.subclasscode=n;var e=l.class.filter(function(l){return l.ClassCode==n});l.ClassName=e.map(function(l){return l.ClassName}),console.log("sssaaa",l.ClassName),l.substatus=!0}}]});this.ClassCode=this.class.map(function(l){return l.ClassCode}),this.ClassName=this.class.map(function(l){return l.ClassName}),console.log("ttss",this.ClassName);for(var e=0;e<this.ClassName.length;e++){n.addInput({type:"radio",label:this.ClassName[e],value:this.ClassCode[e]})}n.present()},l.prototype.gosub=function(){this.substatus=!1,this.RoleStatus?this.teacherrecordcheck():(this.recordcheck(),console.log("shiyan"))},l.prototype.cancel=function(){this.substatus=!1},l.prototype.changeclass=function(){var l=this;if(this.subclasscode==this.student.class)return this.HelpUtils.toastPop("该学生已经是所选班级的一员，请重新选择！"),!1;this.http.postJSON({Router:f.a.Url.changeclass,Method:"POST",Body:{Class:this.subclasscode,Code:this.student.IntelUserCode}}).then(function(n){n.FeedbackCode?console.log(n.FeedbackCode):(console.log("调整班级成功"),l.getstudentinfo(),l.HelpUtils.toastPop("调整班级成功"))})},l.prototype.flowstart=function(){var l=this;console.log("工作流开始",this.operator.name);var n={action:"studentApply",title:this.temTitle,timestart:this.TaskTime,NewClass:this.subclasscode,NewClassName:this.ClassName,sponsor:this.operator.name,sponsorcode:this.operator.IntelUserCode,statustxt:"辅导员审批进行中",status:"1"},e=Object.assign(n,this.student);this.http.postFLOW({Router:f.a.Url.launch,Method:"POST",Body:{flow_id:"",flow_code:"Process_StudentChangeClass",form_data:JSON.stringify(e)}}).then(function(n){l.HelpUtils.toastPopTop("ok"==n?"该学生的调班申请已提交到辅导员审批处":n)},function(l){return console.log(l)})},l.prototype.recordgo=function(){var l=this,n=this.class.map(function(l){return l.Counselor});this.Counselor=n.toString(),console.log("开始获取班级人数",this.Counselor),this.http.postJSON({Router:f.a.Url.getclassnum,Method:"POST",Body:{Code:this.subclasscode}}).then(function(n){!n.FeedbackCode&&n.Data?(l.classpeople=n.Data,console.log("获取班级人数成功",l.classpeople.classnum),l.classpeople.classnum&&(console.log("开始保存记录"),l.recordsave())):console.log(n.FeedbackCode)})},l.prototype.recordsave=function(){this.http.postJSON({Router:f.a.Url.recordsave,Method:"POST",Body:{Code:this.student.IntelUserCode,Name:this.student.name,Cname:this.student.classname,Ucode:this.student.UserCode,Pnum:this.classpeople.classnum,Type:"changeclass",Operator:this.operator.IntelUserCode,Counselor:this.Counselor}}).then(function(l){l.FeedbackCode?console.log(l.FeedbackCode):console.log("保存记录成功")})},l.prototype.recordcheck=function(){var l=this;if(this.subclasscode==this.student.class)return this.HelpUtils.toastPop("该学生已经是所选班级的一员，请重新选择！"),!1;this.http.postJSON({Router:f.a.Url.recordone,Method:"POST",Body:{Code:this.student.IntelUserCode}}).then(function(n){n.FeedbackCode?console.log(n.FeedbackCode):(l.recordone=n.Data,console.log("单条记录获取成功"),l.recordone&&l.recordone.status?l.HelpUtils.toastPop("该学号对应的学生调班正在审批中"):(console.log("开始sssws"),l.flowstart(),l.recordgo()))})},l.prototype.teacherrecordcheck=function(){var l=this;if(this.subclasscode==this.student.class)return this.HelpUtils.toastPop("该学生已经是所选班级的一员，请重新选择！"),!1;this.http.postJSON({Router:f.a.Url.recordone,Method:"POST",Body:{Code:this.student.IntelUserCode}}).then(function(n){n.FeedbackCode?console.log(n.FeedbackCode):(l.recordone=n.Data,console.log("单条记录获取成功"),l.recordone&&l.recordone.status?l.HelpUtils.toastPop("该学号对应的学生调班正在审批中"):(console.log("开始aaaarrr"),l.changeclass()))})},l.prototype.loadGetIntelUser=function(){var l=this;this.http.postJSON({Router:f.a.Url.getintelusername,Method:"POST",Body:{}}).then(function(n){n.FeedbackCode?l.HelpUtils.toastPopTop(n.FeedbackText):l.operator=n.Data},function(l){return console.log(l)})},l.prototype.nowDay=function(){var l=new Date;return l.getFullYear()+"-"+(l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1)+"-"+(l.getDate()<10?"0"+l.getDate():l.getDate())},l}(),C=function(){return function(){}}(),b=e(124),v=e(125),y=e(126),I=e(127),U=e(128),R=e(129),N=e(130),k=e(131),S=e(132),D=e(135),P=e(1),w=e(134),F=e(17),T=e(14),x=e(40),O=e(55),M=e(10),E=e(26),B=e(16),H=e(199),J=e(21),A=e(3),_=e(9),V=e(8),L=e(25),j=e(4),q=e(20),z=e(75),G=e(11),W=c["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Y=c["ɵccf"]("page-detail",g,function(l){return c["ɵvid"](0,[(l()(),c["ɵeld"](0,0,null,null,1,"page-detail",[],null,null,null,r,W)),c["ɵdid"](1,49152,null,0,g,[q.a,z.a,h.a,G.a,m.a,p.c],null,null)],null,null)},{},{},[]),Z=e(12),K=e(76),Q=e(36);e.d(n,"DetailPageModuleNgFactory",function(){return X});var X=c["ɵcmf"](C,[],function(l){return c["ɵmod"]([c["ɵmpd"](512,c.ComponentFactoryResolver,c["ɵCodegenComponentFactoryResolver"],[[8,[b.a,v.a,y.a,I.a,U.a,R.a,N.a,k.a,S.a,Y]],[3,c.ComponentFactoryResolver],c.NgModuleRef]),c["ɵmpd"](4608,M.NgLocalization,M.NgLocaleLocalization,[c.LOCALE_ID,[2,M["ɵa"]]]),c["ɵmpd"](4608,Z["ɵi"],Z["ɵi"],[]),c["ɵmpd"](4608,Z.FormBuilder,Z.FormBuilder,[]),c["ɵmpd"](512,M.CommonModule,M.CommonModule,[]),c["ɵmpd"](512,Z["ɵba"],Z["ɵba"],[]),c["ɵmpd"](512,Z.FormsModule,Z.FormsModule,[]),c["ɵmpd"](512,Z.ReactiveFormsModule,Z.ReactiveFormsModule,[]),c["ɵmpd"](512,K.a,K.a,[]),c["ɵmpd"](512,K.b,K.b,[]),c["ɵmpd"](512,C,C,[]),c["ɵmpd"](256,Q.a,g,[])])})}});