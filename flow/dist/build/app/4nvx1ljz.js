/*! Built with http://stenciljs.com */
const{h:t}=window.App;import{a as i,b as s}from"./chunk-f40e6196.js";class e{componentDidLoad(){const t=this.history.location.query;t&&this.fetchHistory(t.flow_instance_id)}async fetchHistory(t){const e=await i.loading();s("/api/v1/flows/history",{flow_instance_id:t}).then(t=>{for(let i=0;i<t.length;i+=1)2===t[i].status&&(t[i].out_item=JSON.parse(t[i].out_data));this.historyData=t,e.dismiss()}).catch(()=>{e.dismiss(),i.alert("服务器发生错误")})}renderTime(i){if(""!==i.process_time)return t("div",{class:"history-item-title-right"},t("span",{class:"app-gray"},i.process_time))}renderComment(i){if(1!==i.status&&i.out_item.audit_comment&&""!==i.out_item.audit_comment)return t("div",{class:"history-item-comment"},i.out_item.audit_comment)}renderItem(){if(this.historyData)return this.historyData.map(i=>t("div",{class:"history-item"},t("div",{class:"history-item-title"},t("div",{class:"history-item-title-left"},i.title),this.renderTime(i)),this.renderComment(i)))}render(){return t("ion-list",{lines:"none"},t("ion-list-header",null,"申请进程"),this.renderItem())}static get is(){return"app-history-list"}static get properties(){return{history:{type:"Any",attr:"history"},historyData:{state:!0}}}static get style(){return".history-item{position:relative;margin-left:10px;margin-right:10px;border-bottom:1px solid #aaa8a8}.history-item-title{height:35px;line-height:35px;font-size:12px;padding-left:5px;padding-right:5px}.history-item-title-left{float:left}.history-item-title-right{float:right;font-size:10px}.history-item-comment{background-color:#d7d7d7;font-size:10px;padding:5px}"}}export{e as AppHistoryList};