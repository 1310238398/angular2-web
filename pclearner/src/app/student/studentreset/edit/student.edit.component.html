<div class="modal-header">
    <div class="modal-title">{{editUser? '编辑' : '添加'}}-用户管理</div>
</div>
<form nz-form [formGroup]="validateForm">
    <div nz-row [nzGutter]="0">
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row>
                <div nz-col [nzSpan]="6" nz-form-label>
                    <label nz-form-item-required>学号</label>
                </div>
                <div nz-col [nzSpan]="17" nz-form-control>
                    <!-- <nz-input formControlName="UserCode" [nzPlaceHolder]="''" [nzSize]="'large'" maxlength="20" [nzDisabled]="editUser">
                    </nz-input> -->
                    <input nz-input formControlName="UserCode" maxlength="20" [nzDisabled]="editUser" />
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row>
                <div nz-col [nzSpan]="7" nz-form-label>
                    <label nz-form-item-required>姓名</label>
                </div>
                <div nz-col [nzSpan]="17" nz-form-control>
                    <!-- <nz-input formControlName="Name" [nzPlaceHolder]="''" [nzSize]="'large'" maxlength="20">
                    </nz-input> -->
                    <input nz-input formControlName="Name" maxlength="20" />
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row>
                <div nz-col [nzSpan]="6" nz-form-label>
                    <label nz-form-item-required>班级</label>
                </div>
                <div nz-col [nzSpan]="17" nz-form-control>
                    <nz-select style="width: 100%;" formControlName="Department" [nzPlaceHolder]="'班级'" [nzShowSearch]="true"
                        nzAllowClear>
                        <nz-option *ngFor="let option of Classs" [nzLabel]="option.ClassName" [nzValue]="option.ClassCode">
                        </nz-option>
                    </nz-select>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12">
            <div nz-form-item nz-row>
                <div nz-col [nzSpan]="7" nz-form-label>
                    <label nz-form-item-required>身份证号</label>
                </div>
                <div nz-col [nzSpan]="17" nz-form-control>
                    <nz-input formControlName="IDCard" [nzPlaceHolder]="''" [nzSize]="'large'">
                    </nz-input>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="24">
            <div nz-form-item nz-row>
                <div nz-col [nzSpan]="3" nz-form-label>
                    <label>性别</label>
                </div>
                <div nz-col [nzSpan]="9" nz-form-control>
                    <nz-radio-group formControlName="Sex">
                        <label nz-radio [nzValue]="'0030001'">
                            <span>男</span>
                        </label>
                        <label nz-radio [nzValue]="'0030002'">
                            <span>女</span>
                        </label>
                    </nz-radio-group>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12" *ngIf="!editUser">
            <div nz-form-item nz-row>
                <div nz-col [nzSpan]="6" nz-form-label>
                    <label>密码</label>
                </div>
                <div nz-col [nzSpan]="17" nz-form-control>
                    <nz-input nzType='password' formControlName="Password" (ngModelChange)="updateConfirmValidator()"
                        minlength='6' maxlength='20' [nzPlaceHolder]="''" [nzSize]="'large'">
                    </nz-input>
                    <div nz-form-explain *ngIf="validateForm.controls.Password.dirty&&(validateForm.controls.Password.hasError('minlength')||validateForm.controls.Password.hasError('maxlength'))">6-20位密码</div>
                </div>
            </div>
        </div>
        <div nz-col [nzSpan]="12" *ngIf="!editUser">
            <div nz-form-item nz-row>
                <div nz-col [nzSpan]="7" nz-form-label>
                    <label>确认密码</label>
                </div>
                <div nz-col [nzSpan]="17" nz-form-control>
                    <nz-input nzType='password' formControlName="RePassword" minlength='6' maxlength='20'
                        [nzPlaceHolder]="''" [nzSize]="'large'">
                    </nz-input>
                    <!-- <div nz-form-explain *ngIf="getFormControl('checkPassword').dirty&&getFormControl('checkPassword').hasError('required')">Please
                                confirm your password!</div> -->
                    <div nz-form-explain *ngIf="validateForm.controls.RePassword.dirty&&validateForm.controls.RePassword.hasError('confirm')">两次输入密码不同</div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button nz-button type="button" (click)="close()">关闭</button>
        <button nz-button [nzType]="'primary'" (click)="addUser()">保存</button>
    </div>
</form>